{
  "abi": [
    {
      "type": "function",
      "name": "authorizeKey",
      "inputs": [
        { "name": "keyId", "type": "address", "internalType": "address" },
        { "name": "signatureType", "type": "uint8", "internalType": "enum IAccountKeychain.SignatureType" },
        { "name": "expiry", "type": "uint64", "internalType": "uint64" },
        { "name": "enforceLimits", "type": "bool", "internalType": "bool" },
        {
          "name": "limits",
          "type": "tuple[]",
          "internalType": "struct IAccountKeychain.TokenLimit[]",
          "components": [
            { "name": "token", "type": "address", "internalType": "address" },
            { "name": "amount", "type": "uint256", "internalType": "uint256" }
          ]
        }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "getKey",
      "inputs": [
        { "name": "account", "type": "address", "internalType": "address" },
        { "name": "keyId", "type": "address", "internalType": "address" }
      ],
      "outputs": [
        {
          "name": "",
          "type": "tuple",
          "internalType": "struct IAccountKeychain.KeyInfo",
          "components": [
            { "name": "signatureType", "type": "uint8", "internalType": "enum IAccountKeychain.SignatureType" },
            { "name": "keyId", "type": "address", "internalType": "address" },
            { "name": "expiry", "type": "uint64", "internalType": "uint64" },
            { "name": "enforceLimits", "type": "bool", "internalType": "bool" },
            { "name": "isRevoked", "type": "bool", "internalType": "bool" }
          ]
        }
      ],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getRemainingLimit",
      "inputs": [
        { "name": "account", "type": "address", "internalType": "address" },
        { "name": "keyId", "type": "address", "internalType": "address" },
        { "name": "token", "type": "address", "internalType": "address" }
      ],
      "outputs": [{ "name": "", "type": "uint256", "internalType": "uint256" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "getTransactionKey",
      "inputs": [],
      "outputs": [{ "name": "", "type": "address", "internalType": "address" }],
      "stateMutability": "view"
    },
    {
      "type": "function",
      "name": "revokeKey",
      "inputs": [{ "name": "keyId", "type": "address", "internalType": "address" }],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "function",
      "name": "updateSpendingLimit",
      "inputs": [
        { "name": "keyId", "type": "address", "internalType": "address" },
        { "name": "token", "type": "address", "internalType": "address" },
        { "name": "newLimit", "type": "uint256", "internalType": "uint256" }
      ],
      "outputs": [],
      "stateMutability": "nonpayable"
    },
    {
      "type": "event",
      "name": "KeyAuthorized",
      "inputs": [
        { "name": "account", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "publicKey", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "signatureType", "type": "uint8", "indexed": false, "internalType": "uint8" },
        { "name": "expiry", "type": "uint64", "indexed": false, "internalType": "uint64" }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "KeyRevoked",
      "inputs": [
        { "name": "account", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "publicKey", "type": "address", "indexed": true, "internalType": "address" }
      ],
      "anonymous": false
    },
    {
      "type": "event",
      "name": "SpendingLimitUpdated",
      "inputs": [
        { "name": "account", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "publicKey", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "token", "type": "address", "indexed": true, "internalType": "address" },
        { "name": "newLimit", "type": "uint256", "indexed": false, "internalType": "uint256" }
      ],
      "anonymous": false
    },
    { "type": "error", "name": "ExpiryInPast", "inputs": [] },
    { "type": "error", "name": "InvalidSignatureType", "inputs": [] },
    { "type": "error", "name": "KeyAlreadyExists", "inputs": [] },
    { "type": "error", "name": "KeyAlreadyRevoked", "inputs": [] },
    { "type": "error", "name": "KeyExpired", "inputs": [] },
    { "type": "error", "name": "KeyInactive", "inputs": [] },
    { "type": "error", "name": "KeyNotFound", "inputs": [] },
    { "type": "error", "name": "SpendingLimitExceeded", "inputs": [] },
    { "type": "error", "name": "UnauthorizedCaller", "inputs": [] },
    { "type": "error", "name": "ZeroPublicKey", "inputs": [] }
  ],
  "bytecode": { "object": "0x", "sourceMap": "", "linkReferences": {} },
  "deployedBytecode": { "object": "0x", "sourceMap": "", "linkReferences": {} },
  "methodIdentifiers": {
    "authorizeKey(address,uint8,uint64,bool,(address,uint256)[])": "54063a55",
    "getKey(address,address)": "bc298553",
    "getRemainingLimit(address,address,address)": "63b4290d",
    "getTransactionKey()": "b07fbc1a",
    "revokeKey(address)": "5ae7ab32",
    "updateSpendingLimit(address,address,uint256)": "cbbb4480"
  },
  "rawMetadata": "{\"compiler\":{\"version\":\"0.8.25+commit.b61c2a91\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"ExpiryInPast\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidSignatureType\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"KeyAlreadyExists\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"KeyAlreadyRevoked\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"KeyExpired\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"KeyInactive\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"KeyNotFound\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"SpendingLimitExceeded\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"UnauthorizedCaller\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroPublicKey\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"publicKey\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"signatureType\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"expiry\",\"type\":\"uint64\"}],\"name\":\"KeyAuthorized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"publicKey\",\"type\":\"address\"}],\"name\":\"KeyRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"publicKey\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newLimit\",\"type\":\"uint256\"}],\"name\":\"SpendingLimitUpdated\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"},{\"internalType\":\"enum IAccountKeychain.SignatureType\",\"name\":\"signatureType\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"expiry\",\"type\":\"uint64\"},{\"internalType\":\"bool\",\"name\":\"enforceLimits\",\"type\":\"bool\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"internalType\":\"struct IAccountKeychain.TokenLimit[]\",\"name\":\"limits\",\"type\":\"tuple[]\"}],\"name\":\"authorizeKey\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"}],\"name\":\"getKey\",\"outputs\":[{\"components\":[{\"internalType\":\"enum IAccountKeychain.SignatureType\",\"name\":\"signatureType\",\"type\":\"uint8\"},{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"},{\"internalType\":\"uint64\",\"name\":\"expiry\",\"type\":\"uint64\"},{\"internalType\":\"bool\",\"name\":\"enforceLimits\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isRevoked\",\"type\":\"bool\"}],\"internalType\":\"struct IAccountKeychain.KeyInfo\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"getRemainingLimit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getTransactionKey\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"}],\"name\":\"revokeKey\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"keyId\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"newLimit\",\"type\":\"uint256\"}],\"name\":\"updateSpendingLimit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"This precompile is deployed at address `0xaAAAaaAA00000000000000000000000000000000` The Account Keychain allows accounts to authorize secondary keys (Access Keys) that can sign transactions on behalf of the account. Access Keys can be scoped by: - Expiry timestamp (when the key becomes invalid) - Per-TIP20 token spending limits that deplete as the key spends Only the Root Key can call authorizeKey, revokeKey, and updateSpendingLimit. This restriction is enforced by the protocol at transaction validation time. Access Keys attempting to call these functions will fail with UnauthorizedCaller. This design is inspired by session key and access control patterns, enshrined at the protocol level for better UX and reduced gas costs.\",\"kind\":\"dev\",\"methods\":{\"authorizeKey(address,uint8,uint64,bool,(address,uint256)[])\":{\"details\":\"MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]\",\"params\":{\"enforceLimits\":\"Whether to enforce spending limits for this key\",\"expiry\":\"Unix timestamp when key expires (use type(uint64).max for never expires)\",\"keyId\":\"The key identifier (address) to authorize\",\"limits\":\"Initial spending limits for tokens (only used if enforceLimits is true)\",\"signatureType\":\"Signature type of the key (0: Secp256k1, 1: P256, 2: WebAuthn)\"}},\"getKey(address,address)\":{\"params\":{\"account\":\"The account address\",\"keyId\":\"The key ID\"},\"returns\":{\"_0\":\"Key information (returns default values if key doesn't exist)\"}},\"getRemainingLimit(address,address,address)\":{\"params\":{\"account\":\"The account address\",\"keyId\":\"The key ID\",\"token\":\"The token address\"},\"returns\":{\"_0\":\"Remaining spending amount\"}},\"getTransactionKey()\":{\"details\":\"Returns address(0) if the Root Key is being used\",\"returns\":{\"_0\":\"The key ID that signed the transaction\"}},\"revokeKey(address)\":{\"details\":\"MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]\",\"params\":{\"keyId\":\"The key ID to revoke\"}},\"updateSpendingLimit(address,address,uint256)\":{\"details\":\"MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]\",\"params\":{\"keyId\":\"The key ID to update\",\"newLimit\":\"The new spending limit\",\"token\":\"The token address\"}}},\"title\":\"Account Keychain Precompile Interface\",\"version\":1},\"userdoc\":{\"events\":{\"KeyAuthorized(address,address,uint8,uint64)\":{\"notice\":\"Emitted when a new key is authorized\"},\"KeyRevoked(address,address)\":{\"notice\":\"Emitted when a key is revoked\"},\"SpendingLimitUpdated(address,address,address,uint256)\":{\"notice\":\"Emitted when a spending limit is updated\"}},\"kind\":\"user\",\"methods\":{\"authorizeKey(address,uint8,uint64,bool,(address,uint256)[])\":{\"notice\":\"Authorize a new key for the caller's account\"},\"getKey(address,address)\":{\"notice\":\"Get key information\"},\"getRemainingLimit(address,address,address)\":{\"notice\":\"Get remaining spending limit for a key-token pair\"},\"getTransactionKey()\":{\"notice\":\"Get the transaction key used in the current transaction\"},\"revokeKey(address)\":{\"notice\":\"Revoke an authorized key\"},\"updateSpendingLimit(address,address,uint256)\":{\"notice\":\"Update spending limit for a specific token on an authorized key\"}},\"notice\":\"Interface for the Account Keychain precompile that manages authorized access keys\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/tempo-std/src/interfaces/IAccountKeychain.sol\":\"IAccountKeychain\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\",\":tempo-std/=lib/tempo-std/src/\"]},\"sources\":{\"lib/tempo-std/src/interfaces/IAccountKeychain.sol\":{\"keccak256\":\"0xb7e98bb430c004baf3c435dba3cf75d198bdda0e957598c9e388ee9c17d01281\",\"license\":\"MIT OR Apache-2.0\",\"urls\":[\"bzz-raw://58799f63a67cff408f18a93a343aacec5e5a7006230ea8a8cd59242b5a6b18d2\",\"dweb:/ipfs/QmVMNWLbwnzonazwcgH3HjZ11kJvXh7U3rnRdaxFAuhErw\"]}},\"version\":1}",
  "metadata": {
    "compiler": { "version": "0.8.25+commit.b61c2a91" },
    "language": "Solidity",
    "output": {
      "abi": [
        { "inputs": [], "type": "error", "name": "ExpiryInPast" },
        { "inputs": [], "type": "error", "name": "InvalidSignatureType" },
        { "inputs": [], "type": "error", "name": "KeyAlreadyExists" },
        { "inputs": [], "type": "error", "name": "KeyAlreadyRevoked" },
        { "inputs": [], "type": "error", "name": "KeyExpired" },
        { "inputs": [], "type": "error", "name": "KeyInactive" },
        { "inputs": [], "type": "error", "name": "KeyNotFound" },
        { "inputs": [], "type": "error", "name": "SpendingLimitExceeded" },
        { "inputs": [], "type": "error", "name": "UnauthorizedCaller" },
        { "inputs": [], "type": "error", "name": "ZeroPublicKey" },
        {
          "inputs": [
            { "internalType": "address", "name": "account", "type": "address", "indexed": true },
            { "internalType": "address", "name": "publicKey", "type": "address", "indexed": true },
            { "internalType": "uint8", "name": "signatureType", "type": "uint8", "indexed": false },
            { "internalType": "uint64", "name": "expiry", "type": "uint64", "indexed": false }
          ],
          "type": "event",
          "name": "KeyAuthorized",
          "anonymous": false
        },
        {
          "inputs": [
            { "internalType": "address", "name": "account", "type": "address", "indexed": true },
            { "internalType": "address", "name": "publicKey", "type": "address", "indexed": true }
          ],
          "type": "event",
          "name": "KeyRevoked",
          "anonymous": false
        },
        {
          "inputs": [
            { "internalType": "address", "name": "account", "type": "address", "indexed": true },
            { "internalType": "address", "name": "publicKey", "type": "address", "indexed": true },
            { "internalType": "address", "name": "token", "type": "address", "indexed": true },
            { "internalType": "uint256", "name": "newLimit", "type": "uint256", "indexed": false }
          ],
          "type": "event",
          "name": "SpendingLimitUpdated",
          "anonymous": false
        },
        {
          "inputs": [
            { "internalType": "address", "name": "keyId", "type": "address" },
            { "internalType": "enum IAccountKeychain.SignatureType", "name": "signatureType", "type": "uint8" },
            { "internalType": "uint64", "name": "expiry", "type": "uint64" },
            { "internalType": "bool", "name": "enforceLimits", "type": "bool" },
            {
              "internalType": "struct IAccountKeychain.TokenLimit[]",
              "name": "limits",
              "type": "tuple[]",
              "components": [
                { "internalType": "address", "name": "token", "type": "address" },
                { "internalType": "uint256", "name": "amount", "type": "uint256" }
              ]
            }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "authorizeKey"
        },
        {
          "inputs": [
            { "internalType": "address", "name": "account", "type": "address" },
            { "internalType": "address", "name": "keyId", "type": "address" }
          ],
          "stateMutability": "view",
          "type": "function",
          "name": "getKey",
          "outputs": [
            {
              "internalType": "struct IAccountKeychain.KeyInfo",
              "name": "",
              "type": "tuple",
              "components": [
                { "internalType": "enum IAccountKeychain.SignatureType", "name": "signatureType", "type": "uint8" },
                { "internalType": "address", "name": "keyId", "type": "address" },
                { "internalType": "uint64", "name": "expiry", "type": "uint64" },
                { "internalType": "bool", "name": "enforceLimits", "type": "bool" },
                { "internalType": "bool", "name": "isRevoked", "type": "bool" }
              ]
            }
          ]
        },
        {
          "inputs": [
            { "internalType": "address", "name": "account", "type": "address" },
            { "internalType": "address", "name": "keyId", "type": "address" },
            { "internalType": "address", "name": "token", "type": "address" }
          ],
          "stateMutability": "view",
          "type": "function",
          "name": "getRemainingLimit",
          "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }]
        },
        {
          "inputs": [],
          "stateMutability": "view",
          "type": "function",
          "name": "getTransactionKey",
          "outputs": [{ "internalType": "address", "name": "", "type": "address" }]
        },
        {
          "inputs": [{ "internalType": "address", "name": "keyId", "type": "address" }],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "revokeKey"
        },
        {
          "inputs": [
            { "internalType": "address", "name": "keyId", "type": "address" },
            { "internalType": "address", "name": "token", "type": "address" },
            { "internalType": "uint256", "name": "newLimit", "type": "uint256" }
          ],
          "stateMutability": "nonpayable",
          "type": "function",
          "name": "updateSpendingLimit"
        }
      ],
      "devdoc": {
        "kind": "dev",
        "methods": {
          "authorizeKey(address,uint8,uint64,bool,(address,uint256)[])": {
            "details": "MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]",
            "params": {
              "enforceLimits": "Whether to enforce spending limits for this key",
              "expiry": "Unix timestamp when key expires (use type(uint64).max for never expires)",
              "keyId": "The key identifier (address) to authorize",
              "limits": "Initial spending limits for tokens (only used if enforceLimits is true)",
              "signatureType": "Signature type of the key (0: Secp256k1, 1: P256, 2: WebAuthn)"
            }
          },
          "getKey(address,address)": {
            "params": { "account": "The account address", "keyId": "The key ID" },
            "returns": { "_0": "Key information (returns default values if key doesn't exist)" }
          },
          "getRemainingLimit(address,address,address)": {
            "params": { "account": "The account address", "keyId": "The key ID", "token": "The token address" },
            "returns": { "_0": "Remaining spending amount" }
          },
          "getTransactionKey()": {
            "details": "Returns address(0) if the Root Key is being used",
            "returns": { "_0": "The key ID that signed the transaction" }
          },
          "revokeKey(address)": {
            "details": "MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]",
            "params": { "keyId": "The key ID to revoke" }
          },
          "updateSpendingLimit(address,address,uint256)": {
            "details": "MUST only be called in transactions signed by the Root Key      The protocol enforces this restriction by checking transactionKey[msg.sender]",
            "params": {
              "keyId": "The key ID to update",
              "newLimit": "The new spending limit",
              "token": "The token address"
            }
          }
        },
        "version": 1
      },
      "userdoc": {
        "kind": "user",
        "methods": {
          "authorizeKey(address,uint8,uint64,bool,(address,uint256)[])": {
            "notice": "Authorize a new key for the caller's account"
          },
          "getKey(address,address)": { "notice": "Get key information" },
          "getRemainingLimit(address,address,address)": {
            "notice": "Get remaining spending limit for a key-token pair"
          },
          "getTransactionKey()": { "notice": "Get the transaction key used in the current transaction" },
          "revokeKey(address)": { "notice": "Revoke an authorized key" },
          "updateSpendingLimit(address,address,uint256)": {
            "notice": "Update spending limit for a specific token on an authorized key"
          }
        },
        "version": 1
      }
    },
    "settings": {
      "remappings": ["forge-std/=lib/forge-std/src/", "tempo-std/=lib/tempo-std/src/"],
      "optimizer": { "enabled": false, "runs": 200 },
      "metadata": { "bytecodeHash": "ipfs" },
      "compilationTarget": { "lib/tempo-std/src/interfaces/IAccountKeychain.sol": "IAccountKeychain" },
      "evmVersion": "cancun",
      "libraries": {}
    },
    "sources": {
      "lib/tempo-std/src/interfaces/IAccountKeychain.sol": {
        "keccak256": "0xb7e98bb430c004baf3c435dba3cf75d198bdda0e957598c9e388ee9c17d01281",
        "urls": [
          "bzz-raw://58799f63a67cff408f18a93a343aacec5e5a7006230ea8a8cd59242b5a6b18d2",
          "dweb:/ipfs/QmVMNWLbwnzonazwcgH3HjZ11kJvXh7U3rnRdaxFAuhErw"
        ],
        "license": "MIT OR Apache-2.0"
      }
    },
    "version": 1
  },
  "id": 22
}
